<form *ngIf="useForm; else body"
      [id]="id"
      [name]="name"
      (ngSubmit)="onSubmit.emit($event)">

  <ng-container *ngTemplateOutlet="body"></ng-container>
</form>


<ng-template #body>
  <ng-container *ngTemplateOutlet="zone;context: {$implicit: tZone, title:topTitle}">
  </ng-container>

  <ng-container
    *ngTemplateOutlet="zone;context: {$implicit:mZone , title:mainTitle, multiColumn:true}">
  </ng-container>

  <ng-container *ngTemplateOutlet="zone;context: {$implicit:bZone , title:bottomTitle}">
  </ng-container>
</ng-template>


<ng-template #zone let-fields let-title="title" let-multiColumn="multiColumn">

  <div *ngIf="fields"
       [formGroup]="formGroup"
       class="fd-section fd-section--no-border fd-has-margin-regular">
    <div class="fd-section__header" *ngIf="title">
      <h3 class="fd-section__title">{{title}}</h3>
    </div>

    <div class="row start-xs" *ngIf="mZone">
      <div fd-form-set
           *ngFor="let field of fields;trackBy: trackByFieldName"
           class="col-xs-12"
           [ngClass]="{ 'col-sm-6 col-md-6 col-lg-6': multiColumn && !field.isFluid }"
           [style.order]="field.rank">

        <ng-container *ngTemplateOutlet="field?.renderer"></ng-container>
      </div>
    </div>
  </div>
</ng-template>

